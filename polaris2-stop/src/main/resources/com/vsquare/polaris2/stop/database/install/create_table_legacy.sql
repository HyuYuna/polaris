
-- 과목운영정보
CREATE TABLE IF NOT EXISTS TB_COURSE_HISTORY
(
    history_id                                          INT UNSIGNED            NOT NULL        AUTO_INCREMENT      COMMENT '이력 아이디',
    history_year                                        INT UNSIGNED            NOT NULL                            COMMENT '이력 년도',
    id                                                  INT UNSIGNED            NOT NULL                            COMMENT '고유번호',
    operation_code                                      VARCHAR(64)             NOT NULL                            COMMENT '운영코드',
    course_content_id                                   INT UNSIGNED            NOT NULL                            COMMENT '과목 콘텐츠 ID',
    term_id                                             INT UNSIGNED            NOT NULL                            COMMENT '학기/기수 ID',
    service_title                                       VARCHAR(255)            NOT NULL                            COMMENT '서비스 제목',
    year                                                INT UNSIGNED                            DEFAULT NULL        COMMENT '연도',
    study_time_in_hours                                 INT UNSIGNED                            DEFAULT NULL        COMMENT '학습 시간(시)',
    study_time_in_minutes                               INT UNSIGNED                            DEFAULT NULL        COMMENT '학습 시간(분)',
    study_time_in_seconds                               INT UNSIGNED                            DEFAULT NULL        COMMENT '학습 시간(초)',
    short_description                                   LONGTEXT                                DEFAULT NULL        COMMENT '간단 설명',
    properties                                          LONGTEXT                                DEFAULT NULL        COMMENT '부가 속성',
    course_video                                        LONGTEXT                                DEFAULT NULL        COMMENT '과목 소개 영상',
    course_image_url                                    LONGTEXT                                DEFAULT NULL        COMMENT '과목 소개 이미지',
    course_homepage_url                                 LONGTEXT                                DEFAULT NULL        COMMENT '과목 홈페이지 URL',
    learning_method_code                                TINYINT UNSIGNED        NOT NULL                            COMMENT '학습형태코드',
    grading_method_code                                 TINYINT UNSIGNED        NOT NULL                            COMMENT '평가방식코드',
    price                                               DOUBLE UNSIGNED                         DEFAULT NULL        COMMENT '가격',
    price_unit                                          VARCHAR(10)                             DEFAULT NULL        COMMENT '가격의 화폐단위',
    registration_start_date                             DATETIME                                DEFAULT NULL        COMMENT '수강신청시작일',
    registration_end_date                               DATETIME                                DEFAULT NULL        COMMENT '수강신청종료일',
    cancellation_start_date                             DATETIME                                DEFAULT NULL        COMMENT '수강취소시작일',
    cancellation_end_date                               DATETIME                                DEFAULT NULL        COMMENT '수강취소종료일',
    cancel_days                                         INT UNSIGNED                            DEFAULT NULL        COMMENT '수강신청취소일(수강신청 취소일로 부터 N 일)',
    start_date                                          DATETIME                                DEFAULT NULL        COMMENT '시작일시',
    end_date                                            DATETIME                                DEFAULT NULL        COMMENT '종료일시',
    study_days                                          INT UNSIGNED                            DEFAULT NULL        COMMENT '학습기간((수강신청 취소일로 부터 N 일)',
    mark_review_start_date                              DATETIME                                DEFAULT NULL        COMMENT '성적 확인 시작일시',
    mark_review_end_date                                DATETIME                                DEFAULT NULL        COMMENT '성적 확인 종료일시',
    review_start_date                                   DATETIME                                DEFAULT NULL        COMMENT '복습 시작 일시',
    review_end_date                                     DATETIME                                DEFAULT NULL        COMMENT '복습 종료 일시',
    review_days                                         INT UNSIGNED                            DEFAULT NULL        COMMENT '복습기간(수강종료일로 부터 N 일)',
    auto_completion_confirmation                        TINYINT UNSIGNED        NOT NULL        DEFAULT 1           COMMENT '수료 처리 방법( 0 : 수동 / 1 : 자동)',
    pre_registered_student_only                         TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '사전등록 전용 여부',
    sequential_learning_only                            TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '순차학습만 허용 여부',
    offer_certificate                                   TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '수료증 발급 여부',
    certificate_template                                LONGTEXT                                DEFAULT NULL        COMMENT '수료증 양식',
    english_certificate_template                        LONGTEXT                                DEFAULT NULL        COMMENT '영문 수료증 양식',
    provide_additional_study_material                   TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '별도 교제 제고 여부',
    auto_enrollment                                     TINYINT UNSIGNED        NOT NULL        DEFAULT 1           COMMENT '수강 승인 허용이 필요한지 여부 ( 0 : 불필요 / 1 : 필요)',
    use_enrollment_code                                 TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '수강 신청 시 코드를 사용할지 여부 여부 ( 0 : 불필요 / 1 : 필요)',
    enrollment_code                                     VARCHAR(8)                              DEFAULT NULL        COMMENT '수강 신청 코드',
    max_student_count                                   INT UNSIGNED                            DEFAULT NULL        COMMENT '최대 수강 인원',
    student_count                                       INT UNSIGNED            NOT NULL        DEFAULT 0           COMMENT '현재 학습자 수',
    completed_student_count                             INT UNSIGNED            NOT NULL        DEFAULT 0           COMMENT '수료 학습자 수',
    attachment_size_limit                               INT UNSIGNED                            DEFAULT NULL        COMMENT '첨부파일 용량 제한',
    show_student_report_detail                          TINYINT UNSIGNED        NOT NULL        DEFAULT 1           COMMENT '성적 처리 상세 노축 여부',
    terms_of_service_id                                 INT UNSIGNED                            DEFAULT NULL        COMMENT '이용 약관 ID',
    is_curriculum_independent                           TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '과정 종속 여부',
    curriculum_item_type_code                           TINYINT UNSIGNED        NOT NULL                            COMMENT '과정 구성요소 코드',
    enrollment_target_code                              TINYINT UNSIGNED        NOT NULL        DEFAULT 10          COMMENT '수강신청 대상자 여부 코드',
    section_number                                      TINYINT UNSIGNED        NOT NULL        DEFAULT 1           COMMENT '분반 번호',
    first_section_course_id                             INT UNSIGNED                            DEFAULT NULL        COMMENT '분반의 첫번째 과목 아이디',
    allow_management_before_start_date                  TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '시작 일시 전 매니지먼트(관리) 허용 여부',
    is_institution_exclusive                            TINYINT UNSIGNED        NOT NULL        DEFAULT 1           COMMENT '제공기관 전용여부',
    is_open_to_all_institution                          TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '모근 관련기관에서 활용 여부',
    is_archived                                         TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '아카이브 여부',
    is_modifiable                                       TINYINT UNSIGNED        NOT NULL        DEFAULT 1           COMMENT '수강 승인 허용이 필요한지 여부 ( 0 : 불필요 / 1 : 필요)',
    is_available                                        TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '게시 여부 (0 : 불가 / 1 : 가능)',
    exclude_from_statistics                             TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '통계 제외 여부',
    registered_by_user_idx                              INT UNSIGNED            NOT NULL                            COMMENT '등록 사용자 인덱스',
    registered_from_country                             VARCHAR(20)             NOT NULL                            COMMENT '등록 국가명',
    registered_from_ip_address                          VARCHAR(40)             NOT NULL                            COMMENT '등록 IP 주소',
    registered_from_device_type_code                    TINYINT UNSIGNED        NOT NULL                            COMMENT '등록 기기 타입 코드',
    registered_date                                     DATETIME                NOT NULL                            COMMENT '등록일시',
    last_modified_by_user_idx                           INT UNSIGNED            NOT NULL                            COMMENT '최근 수정한 사용자 인덱스',
    last_modified_from_country                          VARCHAR(20)             NOT NULL                            COMMENT '최근 수정한 국가명',
    last_modified_from_ip_address                       VARCHAR(40)             NOT NULL                            COMMENT '최근 수정한 IP 주소',
    last_modified_from_device_type_code                 TINYINT UNSIGNED        NOT NULL                            COMMENT '최근 수정한 기기 타입 코드',
    last_modified_date                                  DATETIME                NOT NULL                            COMMENT '최근 수정일시',
    view_count                                          INT UNSIGNED            NOT NULL        DEFAULT 0           COMMENT '게시물 읽음 횟수',
    like_count                                          INT UNSIGNED            NOT NULL        DEFAULT 0           COMMENT '게시물 좋아요 횟수',
    dislike_count                                       INT UNSIGNED            NOT NULL        DEFAULT 0           COMMENT '게시물 싫어요 횟수',
    favorite_count                                      INT UNSIGNED            NOT NULL        DEFAULT 0           COMMENT '게시물 스크랩 횟수',

    PRIMARY KEY (history_id)

    ) COMMENT '과목운영정보 이력';








-- 운영 관련 테이블
CREATE TABLE IF NOT EXISTS TB_TERM_HISTORY
(
    history_id                                          INT UNSIGNED            NOT NULL        AUTO_INCREMENT      COMMENT '이력 아이디',
    history_year                                        INT UNSIGNED            NOT NULL                            COMMENT '이력 년도',
    id                                                  INT UNSIGNED            NOT NULL                            COMMENT '고유번호',
    institution_id                                      INT UNSIGNED            NOT NULL                            COMMENT '관련기관 ID',
    organization_id                                     INT UNSIGNED                            DEFAULT NULL        COMMENT '위탁기관 ID',
    type_code                                           TINYINT UNSIGNED        NOT NULL                            COMMENT '타입 코드',
    parent_id                                           INT UNSIGNED                            DEFAULT NULL        COMMENT '상위 TERM_ID',
    curriculum_id                                       INT UNSIGNED                            DEFAULT NULL        COMMENT '커리큘럼 ID',
    year                                                SMALLINT UNSIGNED                       DEFAULT NULL        COMMENT '연도',
    number                                              SMALLINT UNSIGNED                       DEFAULT NULL        COMMENT '학기/기수 ID',
    name                                                VARCHAR(255)            NOT NULL                            COMMENT '이름',
    properties                                          LONGTEXT                                DEFAULT NULL        COMMENT '속성',
    description                                         LONGTEXT                                DEFAULT NULL        COMMENT '설명',
    course_attendance_check_method_code                 TINYINT UNSIGNED        NOT NULL                            COMMENT '출석 확인 방법 코드',
    registration_start_date                             DATETIME                                DEFAULT NULL        COMMENT '수강신청 시작일시',
    registration_end_date                               DATETIME                                DEFAULT NULL        COMMENT '수강신청 종료일시',
    cancellation_start_date                             DATETIME                                DEFAULT NULL        COMMENT '수강취소 시작일시',
    cancellation_end_date                               DATETIME                                DEFAULT NULL        COMMENT '수강취소 종료일시',
    start_date                                          DATETIME                                DEFAULT NULL        COMMENT '시작일시',
    end_date                                            DATETIME                                DEFAULT NULL        COMMENT '종료일시',
    review_start_date                                   DATETIME                                DEFAULT NULL        COMMENT '복습시작일시',
    review_end_date                                     DATETIME                                DEFAULT NULL        COMMENT '복습종료일시',
    mark_review_start_date                              DATETIME                                DEFAULT NULL        COMMENT '성적확인시작일시',
    mark_review_end_date                                DATETIME                                DEFAULT NULL        COMMENT '성적확인종료일시',
    exam_start_date                                     DATETIME                                DEFAULT NULL        COMMENT '시험시작일시',
    exam_end_date                                       DATETIME                                DEFAULT NULL        COMMENT '시험종료일시',
    quiz_start_date                                     DATETIME                                DEFAULT NULL        COMMENT '퀴즈시작일시',
    quiz_end_date                                       DATETIME                                DEFAULT NULL        COMMENT '퀴즈종료일시',
    assignment_start_date                               DATETIME                                DEFAULT NULL        COMMENT '과제시작일시',
    assignment_end_date                                 DATETIME                                DEFAULT NULL        COMMENT '과제종료일시',
    forum_start_date                                    DATETIME                                DEFAULT NULL        COMMENT '포럼시작일시',
    forum_end_date                                      DATETIME                                DEFAULT NULL        COMMENT '포럼종료일시',
    allow_course_task_review                            TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '평가리뷰사용여부',
    terms_of_service_id                                 INT UNSIGNED                            DEFAULT NULL        COMMENT '이용약관ID',
    daily_learning_limit                                INT UNSIGNED                            DEFAULT NULL        COMMENT '일일 학습 제한',
    is_modifiable                                       TINYINT UNSIGNED        NOT NULL                            COMMENT '수정 사용 여부',
    is_available                                        TINYINT UNSIGNED        NOT NULL                            COMMENT '게시 여부 (0 : 불가 / 1 : 가능)',
    exclude_from_statistics                             TINYINT UNSIGNED        NOT NULL        DEFAULT 0           COMMENT '통계 제외 여부',
    registered_by_user_idx                              INT UNSIGNED                            DEFAULT NULL        COMMENT '등록 사용자 인덱스',
    registered_from_country                             VARCHAR(20)             NOT NULL                            COMMENT '등록 국가명',
    registered_from_ip_address                          VARCHAR(40)             NOT NULL                            COMMENT '등록 IP 주소',
    registered_from_device_type_code                    TINYINT UNSIGNED        NOT NULL                            COMMENT '등록 기기 타입 코드',
    registered_date                                     DATETIME                NOT NULL                            COMMENT '등록일시',
    last_modified_by_user_idx                           INT UNSIGNED                            DEFAULT NULL        COMMENT '최근 수정한 사용자 인덱스',
    last_modified_from_country                          VARCHAR(20)             NOT NULL                            COMMENT '최근 수정한 국가명',
    last_modified_from_ip_address                       VARCHAR(40)             NOT NULL                            COMMENT '최근 수정한 IP 주소',
    last_modified_from_device_type_code                 TINYINT UNSIGNED        NOT NULL                            COMMENT '최근 수정한 기기 타입 코드',
    last_modified_date                                  DATETIME                NOT NULL                            COMMENT '최근 수정일시',

    PRIMARY KEY (history_id)

    ) COMMENT '학기/기수 이력';
